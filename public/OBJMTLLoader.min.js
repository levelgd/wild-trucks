THREE.OBJMTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(e,t,n,a,r){var s=this,o=new THREE.MTLLoader(this.manager);o.setBaseUrl(e.substr(0,e.lastIndexOf("/")+1)),o.load(t,function(t){var o=t;o.preload();var d=new THREE.XHRLoader(s.manager);d.load(e,function(e){var t=s.parse(e);t.traverse(function(e){if(e instanceof THREE.Mesh&&e.material.name){var t=o.create(e.material.name);t&&(e.material=t)}}),n(t)},a,r)},a,r)},parse:function(e,t){function n(e,t,n){return new THREE.Vector3(e,t,n)}function a(e,t){return new THREE.Vector2(e,t)}function r(e,t,n,a){return new THREE.Face3(e,t,n,a)}function s(e,t){v.length>0&&(E.vertices=v,E.mergeVertices(),E.computeFaceNormals(),E.computeBoundingSphere(),p.add(f),E=new THREE.Geometry,f=new THREE.Mesh(E,u)),void 0!==e&&(f.name=e),void 0!==t&&(u=new THREE.MeshLambertMaterial,u.name=t,f.material=u)}function o(e,t,n,a){void 0===a?E.faces.push(r(parseInt(e)-(i+1),parseInt(t)-(i+1),parseInt(n)-(i+1))):E.faces.push(r(parseInt(e)-(i+1),parseInt(t)-(i+1),parseInt(n)-(i+1),[m[parseInt(a[0])-1].clone(),m[parseInt(a[1])-1].clone(),m[parseInt(a[2])-1].clone()]))}function d(e,t,n){E.faceVertexUvs[0].push([T[parseInt(e)-1].clone(),T[parseInt(t)-1].clone(),T[parseInt(n)-1].clone()])}function l(e,t,n){void 0===e[3]?(o(e[0],e[1],e[2],n),void 0!==t&&t.length>0&&d(t[0],t[1],t[2])):(void 0!==n&&n.length>0?(o(e[0],e[1],e[3],[n[0],n[1],n[3]]),o(e[1],e[2],e[3],[n[1],n[2],n[3]])):(o(e[0],e[1],e[3]),o(e[1],e[2],e[3])),void 0!==t&&t.length>0&&(d(t[0],t[1],t[3]),d(t[1],t[2],t[3])))}for(var i=0,c=new THREE.Group,p=c,E=new THREE.Geometry,u=new THREE.MeshLambertMaterial,f=new THREE.Mesh(E,u),v=[],m=[],T=[],h=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,H=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,g=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,L=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,M=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,w=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,I=e.split("\n"),F=0;F<I.length;F++){var b=I[F];b=b.trim();var x;if(0!==b.length&&"#"!==b.charAt(0))if(null!==(x=h.exec(b)))v.push(n(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])));else if(null!==(x=H.exec(b)))m.push(n(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])));else if(null!==(x=R.exec(b)))T.push(a(parseFloat(x[1]),parseFloat(x[2])));else if(null!==(x=g.exec(b)))l([x[1],x[2],x[3],x[4]]);else if(null!==(x=L.exec(b)))l([x[2],x[5],x[8],x[11]],[x[3],x[6],x[9],x[12]]);else if(null!==(x=M.exec(b)))l([x[2],x[6],x[10],x[14]],[x[3],x[7],x[11],x[15]],[x[4],x[8],x[12],x[16]]);else if(null!==(x=w.exec(b)))l([x[2],x[5],x[8],x[11]],[],[x[3],x[6],x[9],x[12]]);else if(/^o /.test(b))s(),i+=v.length,v=[],p=new THREE.Object3D,p.name=b.substring(2).trim(),c.add(p);else if(/^g /.test(b))s(b.substring(2).trim(),void 0);else if(/^usemtl /.test(b))s(void 0,b.substring(7).trim());else if(/^mtllib /.test(b)){if(t){var B=b.substring(7);B=B.trim(),t(B)}}else/^s /.test(b)||console.log("THREE.OBJMTLLoader: Unhandled line "+b)}return s(void 0,void 0),c}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);